(()=>{var e={};e.id=7548,e.ids=[7548],e.modules={645:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=t(69287),n=t(23112),a=t(79194),i=t.n(a),l=t(12701),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c={children:["",{children:["admin",{children:["protection",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70735)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/protection/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66786)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,48774)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,48486,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,71007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,30260,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/protection/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/protection/page",pathname:"/admin/protection",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13663:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(55e3).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29620:(e,s,t)=>{Promise.resolve().then(t.bind(t,84089))},33873:e=>{"use strict";e.exports=require("path")},34139:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(55e3).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},45686:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(55e3).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},52268:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(55e3).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},53588:(e,s,t)=>{Promise.resolve().then(t.bind(t,70735))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70735:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(61659).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/protection/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/protection/page.tsx","default")},84089:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(84919),n=t(13730),a=t(12932),i=t(95169),l=t(24802),d=t(42434),c=t(35838),o=t(39229),x=t(13663),m=t(52268),u=t(88715),h=t(34139),p=t(2476),j=t(45686);function g(){let[e,s]=(0,n.useState)([]),[t,g]=(0,n.useState)(null),[f,v]=(0,n.useState)(!0),[y,N]=(0,n.useState)(null),b=async()=>{try{v(!0);let e=await fetch("/api/admin/action-logs?limit=50"),t=await e.json(),r=await fetch("/api/admin/stats"),n=await r.json();e.ok&&s(t.logs),r.ok&&g(n.stats)}catch(e){N("Failed to fetch admin protection data"),console.error("Error fetching data:",e)}finally{v(!1)}},A=e=>e?new Date(e).toLocaleString():"N/A",w=e=>({edit_user:"bg-blue-100 text-blue-800",delete_user:"bg-red-100 text-red-800",change_role:"bg-purple-100 text-purple-800",approve_hours:"bg-green-100 text-green-800",reject_hours:"bg-orange-100 text-orange-800",create_channel:"bg-indigo-100 text-indigo-800",delete_channel:"bg-pink-100 text-pink-800"})[e]||"bg-gray-100 text-gray-800";return f?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):y?(0,r.jsxs)(c.Fc,{className:"m-4",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)(c.TN,{children:y})]}):(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Protection Dashboard"})]}),t&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"Total Admins"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.total_admins}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.total_super_admins," super admins"]})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"Recent Actions"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.recent_actions}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"Blocked Actions"}),(0,r.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.blocked_actions}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Prevented violations"})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"Protection Status"}),(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-600"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"All systems secure"})]})]})]}),(0,r.jsxs)(d.tU,{defaultValue:"logs",className:"space-y-4",children:[(0,r.jsxs)(d.j7,{children:[(0,r.jsx)(d.Xi,{value:"logs",children:"Action Logs"}),(0,r.jsx)(d.Xi,{value:"settings",children:"Protection Settings"})]}),(0,r.jsx)(d.av,{value:"logs",className:"space-y-4",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:"Recent Admin Actions"}),(0,r.jsx)(a.BT,{children:"Audit trail of all admin actions and protection decisions"})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:0===e.length?(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No admin actions logged yet"}):e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.E,{className:w(e.action_type),children:e.action_type.replace("_"," ")}),e.is_allowed?(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(h.A,{className:"h-4 w-4 text-red-600"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.reason||"No reason provided"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,r.jsx)(j.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:A(e.created_at)})]})]},e.id))})})]})}),(0,r.jsx)(d.av,{value:"settings",className:"space-y-4",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:"Protection Rules"}),(0,r.jsx)(a.BT,{children:"Current admin protection rules and restrictions"})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Admin-to-Admin Protection"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Regular admins cannot modify other admin accounts"})]}),(0,r.jsx)(i.E,{className:"bg-green-100 text-green-800",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Super Admin Protection"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Only super admins can assign admin roles"})]}),(0,r.jsx)(i.E,{className:"bg-green-100 text-green-800",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Action Logging"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"All admin actions are logged for audit purposes"})]}),(0,r.jsx)(i.E,{className:"bg-green-100 text-green-800",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Real-time Validation"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Actions are validated before execution"})]}),(0,r.jsx)(i.E,{className:"bg-green-100 text-green-800",children:"Active"})]})]})})]})})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(l.$,{onClick:b,variant:"outline",children:"Refresh Data"})})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[1703,7284,3822,5398,3534,5740],()=>t(645));module.exports=r})();
(()=>{var e={};e.id=8532,e.ids=[8532],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20929:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=t(69287),r=t(23112),n=t(79194),i=t.n(n),l=t(12701),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c={children:["",{children:["admin",{children:["analytics-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40567)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/analytics-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66786)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,48774)),"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,48486,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,71007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,30260,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/analytics-dashboard/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/analytics-dashboard/page",pathname:"/admin/analytics-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23648:(e,s,t)=>{Promise.resolve().then(t.bind(t,78933))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35838:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>d,TN:()=>c});var a=t(84919),r=t(13730),n=t(40130),i=t(41949);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef(({className:e,variant:s,...t},r)=>(0,a.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(l({variant:s}),e),...t}));d.displayName="Alert",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));c.displayName="AlertDescription"},40567:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(61659).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/analytics-dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yatishgrandhe/Downloads/Stem-Spark-main/app/admin/analytics-dashboard/page.tsx","default")},52524:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(55e3).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},60096:(e,s,t)=>{Promise.resolve().then(t.bind(t,40567))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73329:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(55e3).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},78933:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(84919),r=t(13730),n=t(12932),i=t(24802),l=t(95169),d=t(42434),c=t(78186),o=t(35838),x=t(40774),m=t(73329),h=t(86850),u=t(52268),p=t(45686),j=t(52524),v=t(11459);let g=(0,t(55e3).A)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);var f=t(56330),y=t(39847),N=t(99208),w=t(48667),b=t(11992),_=t(53954),k=t(91265),A=t(43185),R=t(63899),S=t(41918);function C(){let[e,s]=(0,r.useState)(null),[t,C]=(0,r.useState)(!0),[$,U]=(0,r.useState)(null),[Z,E]=(0,r.useState)("30d"),[B,T]=(0,r.useState)("overview"),D=async()=>{try{C(!0),U(null);let e=await fetch(`/api/analytics/dashboard?time_range=${Z}`),t=await e.json();t.success?s(t.analytics):U(t.error||"Failed to fetch analytics data")}catch(e){U("Failed to fetch analytics data"),console.error("Error fetching analytics:",e)}finally{C(!1)}},P=async(e,s="json")=>{try{let t=await fetch(`/api/analytics/export?type=${e}&time_range=${Z}&format=${s}`);if("csv"===s){let s=await t.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`${e}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}else{let s=await t.json(),a=new Blob([JSON.stringify(s.data,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${e}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}}catch(e){console.error("Error exporting data:",e),U("Failed to export data")}},M=(e,s=50)=>e>=s?"text-green-600":e>=.7*s?"text-yellow-600":"text-red-600",W=e=>new Intl.NumberFormat().format(e),L=e=>`${e.toFixed(1)}%`;return t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading analytics data..."})]})}):$?(0,a.jsxs)(o.Fc,{className:"border-red-200 bg-red-50",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)(o.TN,{className:"text-red-800",children:$})]}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights and data analysis"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(c.l6,{value:Z,onValueChange:E,children:[(0,a.jsx)(c.bq,{className:"w-32",children:(0,a.jsx)(c.yv,{})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"7d",children:"Last 7 days"}),(0,a.jsx)(c.eb,{value:"30d",children:"Last 30 days"}),(0,a.jsx)(c.eb,{value:"90d",children:"Last 90 days"})]})]}),(0,a.jsxs)(i.$,{onClick:D,variant:"outline",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(i.$,{onClick:()=>P("comprehensive"),children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Users"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:W(e.overview.total_users)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",W(e.overview.new_users)," new this period"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Volunteer Hours"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:W(e.overview.total_volunteer_hours)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[W(e.overview.pending_volunteer_hours)," pending approval"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Tutoring Sessions"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:W(e.overview.total_tutoring_sessions)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[W(e.overview.completed_tutoring_sessions)," completed"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Messages"}),(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:W(e.overview.total_messages)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[W(e.overview.active_channels)," active channels"]})]})]})]}),(0,a.jsxs)(d.tU,{value:B,onValueChange:T,className:"w-full",children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(d.Xi,{value:"overview",children:"Overview"}),(0,a.jsx)(d.Xi,{value:"trends",children:"Trends"}),(0,a.jsx)(d.Xi,{value:"engagement",children:"Engagement"}),(0,a.jsx)(d.Xi,{value:"reports",children:"Reports"})]}),(0,a.jsx)(d.av,{value:"overview",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"User Growth"}),(0,a.jsx)(n.BT,{children:"New user registrations over time"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(f.u,{width:"100%",height:300,children:(0,a.jsxs)(y.Q,{data:e.trends.user_growth,children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(w.W,{dataKey:"date"}),(0,a.jsx)(b.h,{}),(0,a.jsx)(_.m,{}),(0,a.jsx)(k.G,{type:"monotone",dataKey:"count",stroke:"#8884d8",fill:"#8884d8"})]})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Volunteer Hours"}),(0,a.jsx)(n.BT,{children:"Approved volunteer hours over time"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(f.u,{width:"100%",height:300,children:(0,a.jsxs)(A.E,{data:e.trends.volunteer_hours,children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(w.W,{dataKey:"date"}),(0,a.jsx)(b.h,{}),(0,a.jsx)(_.m,{}),(0,a.jsx)(R.y,{dataKey:"value",fill:"#82ca9d"})]})})})]})]})}),(0,a.jsx)(d.av,{value:"trends",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Messaging Activity"}),(0,a.jsx)(n.BT,{children:"Message volume over time"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(f.u,{width:"100%",height:300,children:(0,a.jsxs)(g,{data:e.trends.messaging_activity,children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(w.W,{dataKey:"date"}),(0,a.jsx)(b.h,{}),(0,a.jsx)(_.m,{}),(0,a.jsx)(S.N,{type:"monotone",dataKey:"count",stroke:"#ff7300"})]})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Top User Events"}),(0,a.jsx)(n.BT,{children:"Most common user activities"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:e.top_events.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.event_type}),(0,a.jsx)(l.E,{variant:"secondary",children:e.count})]},s))})})]})]})}),(0,a.jsx)(d.av,{value:"engagement",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Engagement Metrics"}),(0,a.jsx)(n.BT,{children:"User engagement and participation rates"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"User Retention Rate"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.engagement.user_retention_rate)}`,children:L(e.engagement.user_retention_rate)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Avg Session Duration"}),(0,a.jsxs)("span",{className:"text-lg font-bold",children:[e.engagement.avg_session_duration.toFixed(1),"h"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Message Engagement"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.engagement.message_engagement)}`,children:L(e.engagement.message_engagement)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Volunteer Participation"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.engagement.volunteer_participation_rate)}`,children:L(e.engagement.volunteer_participation_rate)})]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Conversion Rates"}),(0,a.jsx)(n.BT,{children:"Success rates for key activities"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Volunteer Hours Approval"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.conversions.volunteer_hours_approval_rate)}`,children:L(e.conversions.volunteer_hours_approval_rate)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Tutoring Completion"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.conversions.tutoring_completion_rate)}`,children:L(e.conversions.tutoring_completion_rate)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"User Activation"}),(0,a.jsx)("span",{className:`text-lg font-bold ${M(e.conversions.user_activation_rate)}`,children:L(e.conversions.user_activation_rate)})]})]})})]})]})}),(0,a.jsx)(d.av,{value:"reports",className:"space-y-6",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Data Export"}),(0,a.jsx)(n.BT,{children:"Export analytics data in various formats"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>P("user_analytics"),className:"flex flex-col items-center gap-2 h-auto py-4",children:[(0,a.jsx)(u.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"User Analytics"})]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>P("volunteer_hours"),className:"flex flex-col items-center gap-2 h-auto py-4",children:[(0,a.jsx)(p.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"Volunteer Hours"})]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>P("tutoring_sessions"),className:"flex flex-col items-center gap-2 h-auto py-4",children:[(0,a.jsx)(j.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"Tutoring Sessions"})]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>P("messaging_analytics"),className:"flex flex-col items-center gap-2 h-auto py-4",children:[(0,a.jsx)(v.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"Messaging Analytics"})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Export Options"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(i.$,{onClick:()=>P("comprehensive","json"),children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Export All Data (JSON)"]}),(0,a.jsxs)(i.$,{onClick:()=>P("comprehensive","csv"),variant:"outline",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Export All Data (CSV)"]})]})]})]})]})})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No analytics data available"})]})}},86850:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(55e3).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1703,7284,3822,5398,3534,4356,189,3761,2291],()=>t(20929));module.exports=a})();
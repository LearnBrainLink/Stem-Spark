(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5940],{19266:(e,s,a)=>{"use strict";a.d(s,{U:()=>l});var r=a(93579),t=a(53045);let i=t.env.NEXT_PUBLIC_SUPABASE_URL,n=t.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,l=()=>(0,r.UU)(i,n)},54573:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var r=a(81767),t=a(13647),i=a(19266),n=a(90655);function l(){let[e,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),[d,c]=(0,t.useState)(""),[o,m]=(0,t.useState)(null),x=(0,n.useRouter)(),p=(0,i.U)();(0,t.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:{user:e},error:s}=await p.auth.getUser();if(s||!e)return void x.push("/login");let{data:a,error:r}=await p.from("profiles").select("role, is_super_admin").eq("id",e.id).single();if(r||!a){c("Error loading user profile"),l(!1);return}if("admin"!==a.role&&!a.is_super_admin){c("Access denied. Admin privileges required."),l(!1);return}m({id:e.id,role:a.role,is_super_admin:a.is_super_admin||!1}),await u()}catch(e){console.error("Error checking user:",e),c("Error checking user authentication"),l(!1)}},u=async()=>{try{l(!0),c("");let{data:e,error:a}=await p.from("intern_applications").select("*").order("created_at",{ascending:!1});if(a){console.error("Error loading applications:",a),c("Error loading applications");return}s(e||[])}catch(e){console.error("Error loading applications:",e),c("Error loading applications")}finally{l(!1)}},g=async(s,a)=>{try{if(!o)return void c("User not authenticated");"admin"===o.role&&!o.is_super_admin&&e.find(e=>e.id===s)&&console.log("Admin updating application:",s);let{error:r}=await p.from("intern_applications").update({status:a,updated_at:new Date().toISOString()}).eq("id",s);if(r){console.error("Error updating application:",r),c("Error updating application status");return}await u(),c("Application ".concat(a," successfully"))}catch(e){console.error("Error updating application:",e),c("Error updating application status")}},N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return a?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-20 bg-gray-200 rounded"},s))})]})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Intern Applications"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Review and manage intern applications"})]}),d&&(0,r.jsx)("div",{className:"p-4 mx-6 mt-4 rounded-md ".concat(d.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),children:d}),(0,r.jsx)("div",{className:"p-6",children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),(0,r.jsx)("p",{className:"text-gray-500",children:"When students submit intern applications, they will appear here."})]}):(0,r.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.full_name}),(0,r.jsx)("p",{className:"text-gray-600",children:e.email}),e.phone&&(0,r.jsx)("p",{className:"text-gray-600",children:e.phone})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(j(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Grade ",e.grade]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"School"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.school})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Specialties"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.specialties&&e.specialties.length>0?e.specialties.map((e,s)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded",children:e},s)):(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"No specialties listed"})})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Bio"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.bio})]}),e.experience&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Experience"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.experience})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Motivation"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.motivation})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Availability"}),(0,r.jsx)("p",{className:"text-gray-600",children:e.availability})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Applied: ",N(e.created_at)]}),"pending"===e.status&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>g(e.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>g(e.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Reject"})]})]})]},e.id))})})]})})})}},76272:(e,s,a)=>{Promise.resolve().then(a.bind(a,54573))},90655:(e,s,a)=>{"use strict";var r=a(3399);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[3579,6721,3664,7358],()=>s(76272)),_N_E=e.O()}]);